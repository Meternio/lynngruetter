---
import { useStoryblokApi } from "@storyblok/astro";
import Header from "../components/Header.astro";
import HeroAnimation from "../components/HeroAnimation.astro";
import lynnWhite from "../assets/lynnWhite.svg";

const storyblokApi = useStoryblokApi();
const dev = import.meta.env.DEV;
const { data } = await storyblokApi.get("cdn/stories/home", {
  version: dev ? "draft" : "published",
});
const content = data.story.content;
const isFrontendEditor = Astro.url.searchParams.get('_storyblok')! || '';
---

<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link
      rel="preload"
      href="/fonts/PPNeueMontreal-Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/PPNeueMontreal-Medium.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link rel="preload" href={lynnWhite?.src} as="image">
    <title>{content?.meta?.title || "Lynn Gr√ºtter"}</title>
    <meta
      name="description"
      content={content?.meta?.description ||
        "Ich moderiere: Vor der Fernsehkamera, online oder live an Ihrem Anlass."}
    />
  </head>
  <body data-body class=`font-montrealRegular overflow-hidden ${(dev || isFrontendEditor) && 'dev'}`>
    <Header />
    {(!dev && !isFrontendEditor) && <HeroAnimation />}
    <main class="relative opacity-0 bg-gray" data-main>
      <div class=`lg:pt-20`>
        <slot/>
      </div>
    </main>
  </body>
</html>

<style is:global>
  html {
    scroll-behavior: smooth;
  }

  body {
    transition: filter 0.325s ease-in-out, opacity 0.75s ease-in-out;
  }

  body, a, button, video, [data-grid-category-item-content] {
    cursor: url("/custom-cursor-transparent.png") 15 15, auto !important;
  }

  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .dev {
    overflow: auto;
  }

  .dev main {
    opacity: 1;
    background: transparent;
  }

  .dev main > div{
    padding-top: 80px;
  }

  .dev header {
    mix-blend-mode: normal;
    color: black;
    background-color: white;
  }

  .dev .header-nav-content-menu {
    opacity: 1;
  }

  @font-face {
    font-family: "NeueMontreal-Regular";
    src: url("/fonts/PPNeueMontreal-Regular.woff2") format("woff2");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: "NeueMontreal-Medium";
    src: url("/fonts/PPNeueMontreal-Medium.woff2") format("woff2");
    font-weight: medium;
    font-style: normal;
    font-display: swap;
  }
</style>
